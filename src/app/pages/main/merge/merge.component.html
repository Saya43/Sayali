<app-loader *ngIf="isLoading"></app-loader>
<app-header></app-header>
<div class="content-block">
    <div class="content-header col-lg-12 col-sm-12 col-sm-12 pl-0">
        Merge PDF Files
    </div>
    <div class="row pt-1 pl-2">
        <div class="list-of-content-items col-xl-2 col-lg-3 col-md-4 col-sm-6 col-7 pl-0">
              <input type="file"   id="fileUpload" role="button" multiple  accept=".pdf" (change)="onFileChange($event)" >
        </div>
        <div class="d-none d-xl-block d-lg-block d-md-none d-sm-none item-separator"></div>
        <div
            class="
            col-xl-9 col-lg-8 col-md-10 col-sm-11 col-11 pl-xl-5 pl-md-0 pl-lg-5 pl-sm-0 pl-0 mt-xl-0 mt-md-3 mt-lg-0 mt-sm-2 mt-2 pr-0">
            <h1 >{{files}}</h1>
            <div *ngIf="isShown" class="d-flex flex-column container-fluid file1  col-sm-40 col-100 " id="divshow" >
              <div class="w-100 d-flex justify-content-end">
                <div class="icon1">
                    <span class="d-flex">
                      <div class="reorder-button">
                          <i [class.not-allowed-cursor]="selectedFile === 1" class="fas fa-chevron-circle-up mb-1" (click)="moveRecordUpwords()" role="button"></i>
                          <i [class.not-allowed-cursor]="selectedFile === totalCount" class="fas fa-chevron-circle-down" (click)="moveRecordDownwords()" role="button"></i>
                      </div>
                        <button type="button" class="btn btn-dark buybtn"><i class="fas fa-sort-alpha-down background"></i></button>
                        <button type="button" class="btn btn-dark buybtn">Merge</button>
                        <button type="button" class="btn btn-dark buybtn">Clear</button>
                    </span>
                </div>
              </div>
              <div class="mat-elevation-z8 example-container">
                <table mat-table #table [dataSource]="dataSource"  cdkDropList
                      [cdkDropListData]="dataSource"
                      (cdkDropListDropped)="dropTable($event)">

  <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->
                    <ng-container matColumnDef="row"  >
                      <th mat-header-cell *matHeaderCellDef></th>
                      
                      <td  mat-cell *matCellDef="let element" >      
                        <mat-radio-group
                        aria-labelledby="example-radio-group-label"
                        class="example-radio-group"
                        [(ngModel)]="selectedFile">
                            <mat-radio-button class="example-radio-button" [value]="element.srNo" [checked]="element.isSelected==true" (change)="onFileSelected($event)" >
                            </mat-radio-button>

                        </mat-radio-group>
                      </td>
                      
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="sr.no"  >
                      <th mat-header-cell *matHeaderCellDef > Sr.No </th>
              
                      <td  mat-cell *matCellDef="let element" ><div class="row mx-0">{{element.srNo}}<div *ngIf="element.isDuplicate==true" class="text-danger pl-1"> *</div></div>  </td>
                    </ng-container>

                    <!-- Name Column -->
                    <ng-container matColumnDef="name" >
                      <th mat-header-cell *matHeaderCellDef > Name </th>
                      <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                    </ng-container>

                    <!-- Weight Column -->
                    <ng-container matColumnDef="actions" >
                      <th mat-header-cell *matHeaderCellDef > Action </th>
                      <td mat-cell *matCellDef="let element"><i class="far fa-times-circle" aria-hidden="true" role="button" (click)="deleteRow(element.srNo)" ></i>   </td>
                    </ng-container>

                    <ng-container matColumnDef="footerMessage">
                      <td mat-footer-cell *matFooterCellDef colspan="4" class="footer"> 
                        {{dataSource && dataSource.length ? dataSource.length : 'No'}} File(s) registered
                      </td>
                    </ng-container>

                  
                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns" cdkDrag [cdkDragData]="row"></tr>
                    <tr mat-footer-row *matFooterRowDef="['footerMessage']" ></tr>

                </table>
                
              </div>
              <div class="text-danger mt-3"><strong>Note: </strong> Files with asterisk(*) mark are duplicates</div>
</div>
        </div>
       
    </div> 
</div>

<app-footer ></app-footer>
